---
const products = [
	{
		title: "Compresores de Tornillo",
		description: "Manejas equipos de aire comprimido por la marca Chicago Pneumatic en velocidad fija y variable. Equipos de alta eficiencia y confiabilidad para aplicaciones industriales.",
		image: "/producto_1_compresor.jpg",
		imageAlt: "Compresores de Tornillo Chicago Pneumatic",
		ctaText: "Solicitar Información",
		ctaHref: "https://api.whatsapp.com/send?phone=526643108937&text=Quiero%20informacion%20sobre%20compresores%20de%20tornillo%20Chicago%20Pneumatic",
	},
	{
		title: "Mantenimiento y Servicio",
		description: "Brindamos mantenimiento preventivo y correctivo a equipos de aire comprimido, así como estudios de sistema para garantizar el buen funcionamiento y eficiencia energética.",
		image: "/producto_2_mantenimiento_servicio.jpg",
		imageAlt: "Servicio de Mantenimiento de Compresores",
		ctaText: "Agendar Mantenimiento",
		ctaHref: "https://api.whatsapp.com/send?phone=526643108937&text=Quiero%20agendar%20un%20mantenimiento%20para%20mi%20equipo%20de%20aire%20comprimido",
	},
	{
		title: "Equipo Usado",
		description: "Manejamos equipo usado de aire comprimido en excelente condiciones, completamente revisado y certificado. Oportunidad para obtener equipos de calidad a precio competitivo.",
		image: "/producto_3_equipo_usado.jpg",
		imageAlt: "Equipo Usado de Aire Comprimido",
		ctaText: "Ver Equipo Disponible",
		ctaHref: "https://api.whatsapp.com/send?phone=526643108937&text=Quiero%20informacion%20sobre%20equipo%20usado%20de%20aire%20comprimido",
	},
];
---

<section id="productos" class="relative py-20 bg-gradient-to-b from-gray-900 via-gray-950 to-black overflow-hidden">
	<div class="absolute inset-0 opacity-30">
		<div class="absolute top-0 left-1/4 w-96 h-96 bg-red-900/20 rounded-full blur-3xl"></div>
		<div class="absolute bottom-0 right-1/4 w-96 h-96 bg-red-700/10 rounded-full blur-3xl"></div>
	</div>

	<div class="relative max-w-7xl mx-auto px-6 lg:px-8">
		<div class="text-center mb-16">
			<h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6">
				PRODUCTOS
			</h2>
			<p class="text-xl text-gray-400 max-w-2xl mx-auto">
				Soluciones integrales para sistemas de aire comprimido
			</p>
		</div>

		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 perspective-container">
			{products.map((product, index) => (
				<div
					class={`tilt-card group relative h-full ${index === 0 ? 'tilt-card-1' : index === 1 ? 'tilt-card-2' : 'tilt-card-3'}`}
					data-index={index}
				>
					<div class="absolute inset-0 bg-gradient-to-br from-red-500/10 to-transparent rounded-2xl blur-xl group-hover:blur-2xl transition-all duration-500"></div>
					
					<div class="tilt-card-inner relative bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-2xl overflow-hidden h-full transform transition-transform duration-100 ease-out group-hover:border-red-500/30">
						<div class="tilt-shiny absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10 rounded-2xl"></div>
						
						<div class="relative z-0 p-6 flex flex-col h-full">
							<div class="aspect-video rounded-xl overflow-hidden mb-6 relative bg-gray-900">
								<img
									src={product.image}
									alt={product.imageAlt}
									class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"
								/>
								<div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
							</div>

							<h3 class="text-xl font-bold text-white mb-4 group-hover:text-red-400 transition-colors">
								{product.title}
							</h3>

							<p class="text-gray-300 leading-relaxed mb-6 flex-grow">
								{product.description}
							</p>

							<a
								href={product.ctaHref}
								target="_blank"
								class="inline-flex items-center justify-center gap-3 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl hover:shadow-red-500/25 group/btn"
							>
								<svg
									class="w-5 h-5 group-hover/btn:scale-110 transition-transform"
									fill="currentColor"
									viewBox="0 0 24 24"
								>
									<path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"></path>
								</svg>
								<span>{product.ctaText}</span>
							</a>
						</div>
					</div>
				</div>
			))}
		</div>
	</div>
</section>

<style>
	.perspective-container {
		perspective: 1000px;
	}

	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(30px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.tilt-card:nth-child(1) {
		animation: fadeInUp 0.8s ease-out forwards;
	}

	.tilt-card:nth-child(2) {
		animation: fadeInUp 0.8s ease-out 0.2s forwards;
		opacity: 0;
	}

	.tilt-card:nth-child(3) {
		animation: fadeInUp 0.8s ease-out 0.4s forwards;
		opacity: 0;
	}
</style>

<script>
	function initTiltCards() {
		const cards = document.querySelectorAll('.tilt-card');
		
		if (window.innerWidth < 768) {
			return;
		}

		cards.forEach(card => {
			const inner = card.querySelector('.tilt-card-inner');
			const shiny = card.querySelector('.tilt-shiny');
			
			card.addEventListener('mousemove', (e) => {
				const rect = card.getBoundingClientRect();
				const x = e.clientX - rect.left;
				const y = e.clientY - rect.top;
				
				const centerX = rect.width / 2;
				const centerY = rect.height / 2;
				
				const rotateX = ((y - centerY) / centerY) * -8;
				const rotateY = ((x - centerX) / centerX) * 8;
				
				inner.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
				
				const shinyX = (x / rect.width) * 100;
				const shinyY = (y / rect.height) * 100;
				
				shiny.style.background = `radial-gradient(circle at ${shinyX}% ${shinyY}%, rgba(255, 255, 255, 0.15) 0%, transparent 50%)`;
			});

			card.addEventListener('mouseleave', () => {
				inner.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
			});
		});
	}

	document.addEventListener('DOMContentLoaded', initTiltCards);
	
	let resizeTimeout;
	window.addEventListener('resize', () => {
		clearTimeout(resizeTimeout);
		resizeTimeout = setTimeout(() => {
			const cards = document.querySelectorAll('.tilt-card');
			cards.forEach(card => {
				const inner = card.querySelector('.tilt-card-inner');
				inner.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
			});
			initTiltCards();
		}, 250);
	});
</script>
